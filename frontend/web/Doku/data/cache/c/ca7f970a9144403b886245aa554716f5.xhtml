
<h1 class="sectionedit1" id="hireme-button_funktionalitaet_und_prozess">HireMe-Button Funktionalität und Prozess</h1>
<div class="level1">

<p>
Der wohl interessanteste Punkt des HireMe-Buttons ist die Funktionalität sowie der Bewerbungsprozess. Beide Aspekte werden auf dieser Seite beschreiben.<br/>

</p>

</div>
<!-- EDIT1 SECTION "HireMe-Button Funktionalität und Prozess" [1-214] -->
<h2 class="sectionedit2" id="bewerbungsprozess">Bewerbungsprozess</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> Bewerber ruft Seite mit HireMe-Button auf:</div>
</li>
</ol>

<p>
Sobald der Nutzer die Seite mit dem Button aufruft wird die Datei applier.js geladen. Da man nicht davon ausgehen kann, dass die Webseite, auf der der Button erscheint, jQuery selbst schon lädt, muss zuerst jQuery geladen werden.
</p>

<p>
Dazu wurde von <a href="http://www.sitepoint.com/dynamically-load-jquery-library-javascript/" class="urlextern" title="http://www.sitepoint.com/dynamically-load-jquery-library-javascript/"  rel="nofollow">Sitepoint</a> ein Code-Snippet benutzt<br/>

</p>

<p>
Nachdem nun jQuery verfügbar ist, kann mit dem „Tracken“ des Buttons angefangen werden. Dazu wird er zuerst identifiziert. Da sich der Button in einem &lt;div&gt;&lt;/div&gt; Block befindet, kann sehr einfach Content hinzugefügt werden.<br/>

Dies geschieht mit dem View-Count iFrame als erstes:<br/>

</p>
<pre class="code javascript"><span class="co1">// applier.js</span>
<span class="co1">// Zeile 33ff.</span>
<span class="kw1">var</span> html <span class="sy0">=</span> <span class="st0">'&lt;iframe src=&quot;http://hireme.mi.hdm-stuttgart.de/job/view-count&quot; width=&quot;0&quot; height=&quot;0&quot; id=&quot;hireMeFrame&quot; scrolling=&quot;no&quot; frameBorder=&quot;0&quot; name=&quot;'</span><span class="sy0">+</span>key<span class="sy0">+</span><span class="st0">'&quot;&gt;'</span><span class="sy0">;</span>
$<span class="br0">&#40;</span><span class="st0">&quot;#ac&quot;</span><span class="br0">&#41;</span>.<span class="me1">html</span><span class="br0">&#40;</span>html<span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
Genau hier befindet sich auch die „Schnittstelle“ zwischen den Domains. Der Key auf der anzuzeigenden Seite wird ausgelesen und als Name des iFrames festgelegt. Dies hat den Grund, dass der iFrame nun Zugriff auf den Key hat und somit auch Daten zur Verarbeitung senden kann. Der iFrame soll nicht sichtbar sein, deshalb wurden Breite und Höhe einfach auf 0 gesetzt<br/>

Der iFrame ruft zuerst folgende action im JobController auf:<br/>

</p>
<pre class="code php"><span class="co1">//JobController </span>
<span class="co1">//Zeile 609</span>
<span class="kw2">public</span> <span class="kw2">function</span> actionViewCount<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">renderPartial</span><span class="br0">&#40;</span><span class="st_h">'viewCountIFrame'</span><span class="br0">&#41;</span><span class="sy0">;</span><span class="br0">&#125;</span></pre>

<p>
Somit wird nun die View mit dem Namen „viewCountIFrame“ in den iFrame geladen. In dieser View wird nun auch in der ready Methode auf den key, der als name-Attribut des iFrames dient, zugegriffen. Dort geschieht nun ein einfacher httpRequest, der wieder eine Action im JobController aufruft und den Key des Buttons als parameter mitschickt:<br/>

</p>
<pre class="code javascript"><span class="co1">// viewCountIFrame</span>
<span class="co1">// Zeile 17ff</span>
<span class="kw1">function</span> httpReq<span class="br0">&#40;</span>url<span class="br0">&#41;</span> <span class="br0">&#123;</span>  
    <span class="kw1">var</span> xmlHttp <span class="sy0">=</span> <span class="kw1">new</span> XMLHttpRequest<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    xmlHttp.<span class="me1">open</span><span class="br0">&#40;</span> <span class="st0">&quot;GET&quot;</span><span class="sy0">,</span> url<span class="sy0">,</span> <span class="kw2">false</span> <span class="br0">&#41;</span><span class="sy0">;</span>
    xmlHttp.<span class="me1">send</span><span class="br0">&#40;</span> <span class="kw2">null</span> <span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
$<span class="br0">&#40;</span> document <span class="br0">&#41;</span>.<span class="me1">ready</span><span class="br0">&#40;</span><span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
	httpReq<span class="br0">&#40;</span><span class="st0">&quot;http://hireme.mi.hdm-stuttgart.de/job/view-up?btnKey=&quot;</span><span class="sy0">+</span>window.<span class="me1">name</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
In dieser Action kann schlussendlich auf das ApplyButton Objekt zugegriffen werden und das Attribut viewCOunt erhöht werden. 
</p>

</div>
<!-- EDIT2 SECTION "Bewerbungsprozess" [215-] -->